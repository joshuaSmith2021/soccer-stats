var playerData=[],gamesPlayed=0,playerCount=0,totalGoals=0,totalAssists=0,totalPoints=0;function findTotals(){totalGoals=function(){let c=0;for(let d=0;d<playerData.length;d++)c+=playerData[d].goals;return c}(),totalAssists=function(){let c=0;for(let d=0;d<playerData.length;d++)c+=playerData[d].assists;return c}(),totalPoints=function(){let c=0;for(let d=0;d<playerData.length;d++)c+=playerData[d].points;return c}()}function getLeaders(){var c=0,d=0;for(let e=0;e<playerData.length;e++)playerData[e].goals>=c&&(c=playerData[e].goals),playerData[e].assists>=d&&(d=playerData[e].assists);for(let e=0;e<playerData.length;e++)playerData[e].goals===c&&(playerData[e].mostGoals=!0),playerData[e].assists===d&&(playerData[e].mostAssists=!0)}function setupTabs(){for(let c=0;c<document.getElementsByClassName('tabbutton').length;c++)document.getElementsByClassName('tabbutton')[c].addEventListener('click',function(){for(let e=0;e<document.getElementsByClassName('tabbutton').length;e++)document.getElementsByClassName('tabbutton')[e].classList.remove('selected');this.classList.add('selected');for(let e=0;e<document.getElementsByClassName('tab').length;e++)document.getElementsByClassName('tab')[e].style.display='none';document.getElementById(this.innerText.replace(/\s+/g,'').toLowerCase()+'Section').style.display='block'})}function radarSetup(){const c=document.getElementById('statsContainer');var d='',e=0;for(e=0;e<playerData.length;e++)0==e%3&&(d+='<div class="w3-row">'),d+='<div class="w3-col l4 m12"><h4 class="w3-center">'+playerData[e].playerName+function(){return playerData[e].mostGoals&&playerData[e].mostAssists?' <i class="fa fa-trophy w3-text-yellow hover-container"><ul><li>Top Scorer ('+playerData[e].goals+')</li><li>Most Assists ('+playerData[e].assists+')</li></ul></i>':playerData[e].mostGoals?' <i class="fa fa-trophy w3-text-yellow hover-container"><ul><li>Top Scorer ('+playerData[e].goals+')</li></ul></i>':playerData[e].mostAssists?' <i class="fa fa-trophy w3-text-yellow hover-container"><ul><li>Most Assists ('+playerData[e].assists+')</li></ul></i>':''}()+'</h4><canvas class="playerDisplay"></canvas></div>',(0==(e+1)%3||e+1===playerData.length)&&(d+='</div>');c.innerHTML=d;const f=document.getElementsByClassName('playerDisplay');for(let g=0;g<playerData.length;g++)let h=f[g].getContext('2d'),l=new Chart(h,{type:'radar',data:{labels:['Goals','Assists','Points','Goals per Game','Assists per Game','Points per Game'],datasets:[{label:playerData[g].playerName,backgroundColor:'rgba(224, 23, 23, 0.2)',borderColor:'rgb(224, 23, 23)',data:function(){let m=[playerData[g].goals,playerData[g].assists,playerData[g].points,playerData[g].goals/gamesPlayed,playerData[g].assists/gamesPlayed,playerData[g].points/gamesPlayed];return m}()},{label:'Average Player',backgroundColor:'rgb(23, 43, 208, 0.2)',borderColor:'rgb(23, 43, 208)',data:function(){let m=[totalGoals/playerCount,totalAssists/playerCount,totalPoints/playerCount,totalGoals/playerCount/gamesPlayed,totalAssists/playerCount/gamesPlayed,totalPoints/playerCount/gamesPlayed];return m}()}]}})}function buildTable(c){const d=document.getElementById('tableDisplay');for(let e=0;e<c.length;e++)d.innerHTML+='<tr><td>'+c[e].playerName+function(){return c[e].mostGoals&&c[e].mostAssists?' <i class="fa fa-trophy w3-text-yellow hover-container"><ul><li>Top Scorer ('+c[e].goals+')</li><li>Most Assists ('+c[e].assists+')</li></ul></i>':c[e].mostGoals?' <i class="fa fa-trophy w3-text-yellow hover-container"><ul><li>Top Scorer ('+c[e].goals+')</li></ul></i>':c[e].mostAssists?' <i class="fa fa-trophy w3-text-yellow hover-container"><ul><li>Most Assists ('+c[e].assists+')</li></ul></i>':''}()+'</td><td>'+c[e].goals+'</td><td>'+c[e].assists+'</td><td>'+c[e].points+'</td><td>'+Math.round(1e3*(c[e].goals/gamesPlayed))/1e3+'</td><td>'+Math.round(1e3*(c[e].assists/gamesPlayed))/1e3+'</td><td>'+Math.round(1e3*(c[e].points/gamesPlayed))/1e3+'</td>';d.innerHTML+='<tr><td><b>Total</b></td><td><b>'+totalGoals+'</b></td><td><b>'+totalAssists+'</b></td><td><b>'+totalPoints+'</b></td><td>---</td><td>---</td><td>---</td></tr>'}function tableSetup(){buildTable(playerData);const c=document.getElementsByClassName('dataCol'),d={player:!1,goals:'goals',assists:'assists',points:'points',goalsgame:'goals',assistsgame:'assists',pointsgame:'points'};for(let e=0;e<c.length;e++)c[e].addEventListener('click',function(){d[this.innerText.toLowerCase().replace('/','')]&&sortTable(d[this.innerText.toLowerCase().replace('/','')])})}function sortByKey(c,d){return c.sort(function(e,f){var g=e[d],h=f[d];return g<h?-1:g>h?1:0}).reverse()}function sortTable(c){let d=document.getElementById('tableDisplay');d.innerHTML='';const e=sortByKey(playerData,c);buildTable(e)}function graphSetup(){var c='';for(let d=0;d<playerData.length;d++)0==d%3&&(c+='<div class="w3-row">'),c+='<div class="w3-col l4 m12"><h4 class="w3-center">'+playerData[d].playerName+function(){return playerData[d].mostGoals&&playerData[d].mostAssists?' <i class="fa fa-trophy w3-text-yellow hover-container"><ul><li>Top Scorer ('+playerData[d].goals+')</li><li>Most Assists ('+playerData[d].assists+')</li></ul></i>':playerData[d].mostGoals?' <i class="fa fa-trophy w3-text-yellow hover-container"><ul><li>Top Scorer ('+playerData[d].goals+')</li></ul></i>':playerData[d].mostAssists?' <i class="fa fa-trophy w3-text-yellow hover-container"><ul><li>Most Assists ('+playerData[d].assists+')</li></ul></i>':''}()+'</h4><canvas id="graph'+d+'"></canvas></div>',(0==(d+1)%3||d+1===playerData.length)&&(c+='</div>');document.getElementById('graphContainer').innerHTML=c;for(let d=0;d<playerData.length;d++)let e=document.getElementById('graph'+d).getContext('2d'),f=new Chart(e,{type:'bar',data:{labels:['Goals','Assists','Points','Goals per Game','Assists per Game','Points per Game'],datasets:[{label:playerData[d].playerName,backgroundColor:'rgba(224, 23, 23, 0.2)',borderColor:'rgb(224, 23, 23)',data:function(){let g=[playerData[d].goals,playerData[d].assists,playerData[d].points,playerData[d].goals/gamesPlayed,playerData[d].assists/gamesPlayed,playerData[d].points/gamesPlayed];return g}()},{label:'Average Player',backgroundColor:'rgb(23, 43, 208, 0.2)',borderColor:'rgb(23, 43, 208)',data:function(){let g=[totalGoals/playerCount,totalAssists/playerCount,totalPoints/playerCount,totalGoals/playerCount/gamesPlayed,totalAssists/playerCount/gamesPlayed,totalPoints/playerCount/gamesPlayed];return g}()}]}})}const http=new XMLHttpRequest;http.onreadystatechange=function(){if(4===this.readyState&&200===this.status){const c=JSON.parse(this.responseText);playerData=c.player_data,gamesPlayed=c.games_played,playerCount=c.player_count,findTotals(),getLeaders(),setupTabs(),radarSetup(),tableSetup(),graphSetup()}},http.open('GET','player_stats.json'),http.send();
