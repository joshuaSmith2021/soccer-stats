var allData={},totals={},averages={},playerCount=0;function getTotals(a){var b={};const c=Object.keys(a);for(var d=0;d<c.length;d++){var e=a[c[d]].length,f=e,g=Object.keys(a[c[d]][0]);'Goalkeeping'!==c[d]&&(f=playerCount);for(var h=0;h<g.length;h++){b[g[h]]=0;for(var m,l=0;l<e;l++)m=a[c[d]][l][g[h]],isNaN(m)||(b[g[h]]+=a[c[d]][l][g[h]])}}return delete b.Player,b}function getAverages(a){var b={};const c=Object.keys(a);for(var d=0;d<c.length;d++){var e=a[c[d]].length,f=e,g=Object.keys(a[c[d]][0]);'Goalkeeping'!==c[d]&&(f=playerCount);for(var h=0;h<g.length;h++){b[g[h]]=0;for(var m,l=0;l<e;l++)m=a[c[d]][l][g[h]],isNaN(m)||(b[g[h]]+=a[c[d]][l][g[h]]);b[g[h]]/=f}}return delete b.Player,b}function setupTabs(){for(let a=0;a<document.getElementsByClassName('tabbutton').length;a++)document.getElementsByClassName('tabbutton')[a].addEventListener('click',function(){for(let c=0;c<document.getElementsByClassName('tabbutton').length;c++)document.getElementsByClassName('tabbutton')[c].classList.remove('selected');this.classList.add('selected');for(let c=0;c<document.getElementsByClassName('tab').length;c++)document.getElementsByClassName('tab')[c].style.display='none';document.getElementById(this.innerText.replace(/\s+/g,'').toLowerCase()+'Section').style.display='block'})}function makeTable(a,b,c,d){const e=document.createElement('TABLE'),f=document.createElement('THEAD'),g=document.createElement('TBODY'),h=document.createElement('H4');h.appendChild(document.createTextNode(b)),e.className+='w3-table w3-bordered w3-striped w3-hoverable w3-large';const l=document.createElement('TR');for(let o,n=0;n<d.length;n++)o=document.createElement('TH'),o.appendChild(document.createTextNode(d[n])),l.appendChild(o);f.appendChild(l),e.appendChild(f);for(let o,n=0;n<c.length;n++){o=document.createElement('TR');for(let q,p=0;p<d.length;p++){q=document.createElement('TD');var m=c[n][d[p]];'Player'!==d[p]&&(m=(1e-4*Math.round(c[n][d[p]]/1e-4)+'').substring(0,6)),q.appendChild(document.createTextNode(m)),o.appendChild(q)}g.appendChild(o)}e.appendChild(g),document.getElementById(a).appendChild(h),document.getElementById(a).appendChild(e)}function makeRadar(a,b){const c=document.createElement('CANVAS'),d=c.getContext('2d');new Chart(d,{type:'radar',data:{labels:b,datasets:[{label:a.Player,backgroundColor:'rgba(224, 23, 23, 0.2)',borderColor:'rgb(224, 23, 23)',data:function(){let f=[];for(let g=0;g<b.length;g++)f.push(a[b[g]]);return f}()},{label:'Team Average',backgroundColor:'rgb(23, 43, 208, 0.2)',borderColor:'rgb(23, 43, 208)',data:function(){let f=[];for(let g=0;g<b.length;g++)f.push(averages[b[g]]);return f}()}]}});return c}function createRadars(){for(let e=0;e<Object.keys(allData).length;e++){var a=document.createElement('DIV');a.className+='w3-row';for(let f=0;f<allData[Object.keys(allData)[e]].length;f++){var b=document.createElement('DIV');if(b.className+='w3-col l4 m12','Goals and Assists'===Object.keys(allData)[e]){var c=document.createElement('H4');c.className+='w3-center';var d=document.createTextNode(allData['Goals and Assists'][f].Player);c.appendChild(d),b.appendChild(c),b.appendChild(makeRadar(allData['Goals and Assists'][f],['Goals','Assists','Points','Goals per Game','Assists per Game','Points per Game']))}else if('Goalkeeping'===Object.keys(allData)[e]);a.appendChild(b),(0==(f+1)%3&&0!==f||f+1===allData[Object.keys(allData)[e]].length)&&(a.innerHTML,document.getElementById('radarviewSection').appendChild(a),a=document.createElement('DIV'),a.className+='w3-row',console.log(f))}}}function makeGraph(a,b){const c=document.createElement('CANVAS'),d=c.getContext('2d');new Chart(d,{type:'bar',data:{labels:b,datasets:[{label:a.Player,backgroundColor:'rgba(224, 23, 23, 0.2)',borderColor:'rgb(224, 23, 23)',data:function(){let f=[];for(let g=0;g<b.length;g++)f.push(a[b[g]]);return f}()},{label:'Team Average',backgroundColor:'rgb(23, 43, 208, 0.2)',borderColor:'rgb(23, 43, 208)',data:function(){let f=[];for(let g=0;g<b.length;g++)f.push(averages[b[g]]);return f}()}]}});return c}function createGraphs(){for(let e=0;e<Object.keys(allData).length;e++){var a=document.createElement('DIV');a.className+='w3-row';for(let f=0;f<allData[Object.keys(allData)[e]].length;f++){var b=document.createElement('DIV');if(b.className+='w3-col l4 m12','Goals and Assists'===Object.keys(allData)[e]){var c=document.createElement('H4');c.className+='w3-center';var d=document.createTextNode(allData['Goals and Assists'][f].Player);c.appendChild(d),b.appendChild(c),b.appendChild(makeGraph(allData['Goals and Assists'][f],['Goals','Assists','Points','Goals per Game','Assists per Game','Points per Game']))}else if('Goalkeeping'===Object.keys(allData)[e]);a.appendChild(b),(0==(f+1)%3&&0!==f||f+1===allData[Object.keys(allData)[e]].length)&&(a.innerHTML,document.getElementById('graphviewSection').appendChild(a),a=document.createElement('DIV'),a.className+='w3-row',console.log(f))}}}const http=new XMLHttpRequest;http.onreadystatechange=function(){4===this.readyState&&200===this.status&&(console.log(this.responseText),allData=JSON.parse(this.responseText).data_sets,playerCount=JSON.parse(this.responseText).player_count,setupTabs(),totals=getTotals(allData),averages=getAverages(allData),makeTable('tableviewSection','Goals and Assists',allData['Goals and Assists'],['Player','Goals','Assists','Points','Goals per Game','Assists per Game','Points per Game']),document.getElementById('tableviewSection').innerHTML+='<hr/>',makeTable('tableviewSection','Goalkeeping',allData.Goalkeeping,['Player','Minutes','Shots faced','Goals allowed','GAA']),createRadars(),createGraphs())},http.open('GET','player_stats.json'),http.send();